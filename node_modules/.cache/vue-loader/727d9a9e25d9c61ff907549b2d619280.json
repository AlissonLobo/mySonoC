{"remainingRequest":"C:\\projetos\\sonocaps-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\projetos\\sonocaps-vue\\src\\components\\gerais\\head\\datalayers_bkp.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\projetos\\sonocaps-vue\\src\\components\\gerais\\head\\datalayers_bkp.vue","mtime":1630994108729},{"path":"C:\\projetos\\sonocaps-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\projetos\\sonocaps-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\projetos\\sonocaps-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\projetos\\sonocaps-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgY29tdW5pY2FjYW8gZnJvbSAnQC9jb211bmljYWNhby5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdWNlc3NvOiBmYWxzZSwNCiAgICAgIGRhdGFsYXllcjp7fQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNldFBhZ2luYShyZXNwb25zZVBhZ2luYSl7DQogICAgICAvL07Dg08gUEVSTUlURSBDT05USU5VQVINCiAgICAgIGlmKCF0aGlzLnN1Y2Vzc28pIHJldHVybiBmYWxzZTsNCg0KICAgICAgLy9DUklBIE9TIERBVEFMQVlFUlMgREFTIFDDgUdJTkFTDQogICAgICBzd2l0Y2ggKHJlc3BvbnNlUGFnaW5hLmVzdHJ1dHVyYS5uaXZlbCkgew0KICAgICAgICBjYXNlICdob21lJzoNCiAgICAgICAgICByZXR1cm4gdGhpcy5zZXRQYWdpbmFIb21lKCk7DQoNCiAgICAgICAgY2FzZSAncHJvZHVjdC9saXN0aW5nL2NhdGVnb3J5JzoNCiAgICAgICAgY2FzZSAncHJvZHVjdC9saXN0aW5nL2JyYW5kJzoNCiAgICAgICAgY2FzZSAncHJvZHVjdC9saXN0aW5nL2xhbmRpbmctcGFnZSc6DQogICAgICAgICAgcmV0dXJuIHRoaXMuc2V0UGFnaW5hTGlzdGFnZW0ocmVzcG9uc2VQYWdpbmEpOw0KDQogICAgICAgIGNhc2UgJ3Byb2R1Y3QvbGlzdGluZy9zZWFyY2gnOg0KICAgICAgICAgIHJldHVybiB0aGlzLnNldFBhZ2luYUJ1c2NhKHJlc3BvbnNlUGFnaW5hKTsNCg0KICAgICAgICAvLyBjYXNlICdwcm9kdWN0L2RldGFpbCc6DQogICAgICAgIC8vICAgcmV0dXJuIHRoaXMuc2V0UGFnaW5hRGV0YWxoZVByb2R1dG8ocmVzcG9uc2VQYWdpbmEpOw0KDQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgcmV0dXJuIHRoaXMuc2V0UGFnaW5hRGVmYXVsdCgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0UGFnaW5hSG9tZSgpew0KICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHsNCiAgICAgICAgZ29vZ2xlX3RhZ19wYXJhbXM6IHsNCiAgICAgICAgICAgIGVjb21tX3BhZ2V0eXBlOiAnaG9tZScNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRQYWdpbmFEZWZhdWx0KCl7DQogICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goew0KICAgICAgICBnb29nbGVfdGFnX3BhcmFtczogew0KICAgICAgICAgICAgZWNvbW1fcGFnZXR5cGU6ICdvdGhlcicNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRQYWdpbmFMaXN0YWdlbShyZXNwb25zZUxpc3RhZ2VtKXsNCg0KICAgICAgLy9BVVhJTElBUkVTDQogICAgICB2YXIgaW1wcmVzc2lvbnMgPSBbXTsNCiAgICAgIHZhciBpZHNMaXN0YWRvcyA9IFtdOw0KICAgICAgdmFyIHZhbG9yVG90YWwgID0gMDsNCiAgICAgIHZhciBkaXNwb25pdmVsICA9ICdpbmRpc3Bvbml2ZWwnOw0KICAgICAgdmFyIG5vbWVQYWdpbmEgID0gJ0xpc3RhZ2VtJzsNCg0KICAgICAgLy9OT01FIERBIFDDgUdJTkENCiAgICAgIHN3aXRjaCAocmVzcG9uc2VMaXN0YWdlbS5lc3RydXR1cmEubml2ZWwpIHsNCiAgICAgICAgY2FzZSAncHJvZHVjdC9saXN0aW5nL2NhdGVnb3J5JzoNCiAgICAgICAgICBub21lUGFnaW5hID0gcmVzcG9uc2VMaXN0YWdlbS5jb250ZXVkby5jYXRlZ29yaWEubm9tZTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncHJvZHVjdC9saXN0aW5nL2JyYW5kJzoNCiAgICAgICAgICBub21lUGFnaW5hID0gcmVzcG9uc2VMaXN0YWdlbS5jb250ZXVkby5tYXJjYS5ub21lOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICdwcm9kdWN0L2xpc3RpbmcvbGFuZGluZy1wYWdlJzoNCiAgICAgICAgICBub21lUGFnaW5hID0gcmVzcG9uc2VMaXN0YWdlbS5jb250ZXVkby5sYW5kaW5nUGFnZS5ub21lOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KDQogICAgICAvL1BST0RVVE9TIERBIExJU1RBR0VNDQogICAgICByZXNwb25zZUxpc3RhZ2VtLmNvbnRldWRvLnByb2R1dG9zLm1hcChmdW5jdGlvbih2YWx1ZSkgew0KICAgICAgICAgIC8vVE9ETyBBRElDSU9OQVIgTk9NRSBEQSBNQVJDQQ0KICAgICAgICAgIGltcHJlc3Npb25zLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUubm9tZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB2YWx1ZS5wcmVjb3MucG9yLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmQ6ICIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogbm9tZVBhZ2luYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAoaW1wcmVzc2lvbnMubGVuZ3RoICsgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgLy9TVEFUVVMgREEgTElTVEFHRU0NCiAgICAgICAgIGRpc3Bvbml2ZWwgPSB2YWx1ZS5zdGF0dXMgPT0gJ2Rpc3Bvbml2ZWwnID8gJ2Rpc3Bvbml2ZWwnIDogZGlzcG9uaXZlbDsNCg0KICAgICAgICAgLy9WQUxPUiBUT1RBTCBEQSBMSVNUQUdFTQ0KICAgICAgICAgdmFsb3JUb3RhbCArPSB2YWx1ZS5wcmVjb3MucG9yOw0KDQogICAgICAgICAvL0lEUyBMSVNUQURPUw0KICAgICAgICAgaWRzTGlzdGFkb3MucHVzaCh2YWx1ZS5pZCk7DQogICAgICB9KTsNCg0KICAgICAgLy9EQVRBTEFZRVIgREUgQlVTQ0ENCiAgICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaCh7DQogICAgICAgIGdvb2dsZV90YWdfcGFyYW1zOiB7DQogICAgICAgICAgICBlY29tbV9wcm9kaWQ6IGlkc0xpc3RhZG9zLA0KICAgICAgICAgICAgZWNvbW1fcGFnZXR5cGU6ICdjYXRlZ29yeScsDQogICAgICAgICAgICBlY29tbV90b3RhbHZhbHVlOiB2YWxvclRvdGFsDQogICAgICAgIH0sDQogICAgICAgIGVzdG9xdWU6IGRpc3Bvbml2ZWwsDQogICAgICAgIGVjb21tZXJjZTp7DQogICAgICAgICAgY3VycmVuY3lDb2RlOiAiQlJMIiwNCiAgICAgICAgICBpbXByZXNzaW9uczogaW1wcmVzc2lvbnMNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRQYWdpbmFCdXNjYShyZXNwb25zZUxpc3RhZ2VtKXsNCiAgICAgIC8vUFJPRFVUT1MgREEgTElTVEFHRU0NCiAgICAgIHZhciBpbXByZXNzaW9ucyA9IFtdOw0KICAgICAgcmVzcG9uc2VMaXN0YWdlbS5jb250ZXVkby5wcm9kdXRvcy5tYXAoZnVuY3Rpb24odmFsdWUpIHsNCiAgICAgICAgICAvL1RPRE8gQURJQ0lPTkFSIE5PTUUgREEgTUFSQ0ENCiAgICAgICAgICBpbXByZXNzaW9ucy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5vbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogdmFsdWUucHJlY29zLnBvciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYW5kOiAiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdTZWFyY2ggUmVzdWx0cycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogKGltcHJlc3Npb25zLmxlbmd0aCArIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICB9KTsNCg0KICAgICAgLy9EQVRBTEFZRVIgREUgQlVTQ0ENCiAgICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaCh7DQogICAgICAgIGdvb2dsZV90YWdfcGFyYW1zOiB7DQogICAgICAgICAgICBlY29tbV9wYWdldHlwZTogJ3NlYXJjaHJlc3VsdHMnDQogICAgICAgIH0sDQogICAgICAgIGVjb21tZXJjZTp7DQogICAgICAgICAgY3VycmVuY3lDb2RlOiAiQlJMIiwNCiAgICAgICAgICBpbXByZXNzaW9uczogaW1wcmVzc2lvbnMNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRQYWdpbmFEZXRhbGhlUHJvZHV0byhyZXNwb25zZURldGFsaGUpew0KICAgICAgLy9QUk9EVVRPUyBWSU5DVUxBRE9TIEFPIERFVEFMSEUNCiAgICAgIC8vVE9ETzogQURJQ0lPTkFSIERFTUFJUyBQUk9EVVRPUyBWSU5DVUxBRE9TDQogICAgICB2YXIgcHJvZHV0b3MgPSBbDQogICAgICAgIHsNCiAgICAgICAgICBpZDogcmVzcG9uc2VEZXRhbGhlLmNvbnRldWRvLmlkLA0KICAgICAgICAgIG5hbWU6IHJlc3BvbnNlRGV0YWxoZS5jb250ZXVkby5ub21lLA0KICAgICAgICAgIHByaWNlOiByZXNwb25zZURldGFsaGUuY29udGV1ZG8ucHJlY29zLnBvciwNCiAgICAgICAgICBicmFuZDogcmVzcG9uc2VEZXRhbGhlLmNvbnRldWRvLm1hcmNhLm5vbWUsDQogICAgICAgICAgY2F0ZWdvcnk6IHJlc3BvbnNlRGV0YWxoZS5jb250ZXVkby5jYXRlZ29yaWEubm9tZQ0KICAgICAgICB9DQogICAgICBdOw0KDQogICAgICAvL0RBVEFMQVlFUiBERSBERVRBTEhFDQogICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29nbGVfdGFnX3BhcmFtczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjb21tX3Byb2RpZDogcmVzcG9uc2VEZXRhbGhlLmNvbnRldWRvLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjb21tX3BhZ2V0eXBlOiAncHJvZHVjdCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNvbW1fdG90YWx2YWx1ZTogcmVzcG9uc2VEZXRhbGhlLmNvbnRldWRvLnByZWNvcy5wb3IsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNvbW1fY2F0ZWdvcnk6IHJlc3BvbnNlRGV0YWxoZS5jb250ZXVkby5jYXRlZ29yaWEubm9tZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RvcXVlOnJlc3BvbnNlRGV0YWxoZS5jb250ZXVkby5zdGF0dXMgPT0gJ2Rpc3Bvbml2ZWwnID8gJ2Rpc3Bvbml2ZWwnIDogJ2luZGlzcG9uaXZlbCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmNhczpyZXNwb25zZURldGFsaGUuY29udGV1ZG8ubWFyY2Eubm9tZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1OnJlc3BvbnNlRGV0YWxoZS5jb250ZXVkby5za3UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjb21tZXJjZTp7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6ew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogIlDDoWdpbmEgZGUgcHJvZHV0byINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDp7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogcHJvZHV0b3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIC8vSU4gQlJPV1NFUg0KICAgIGlmKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKXsNCiAgICAgIC8vSU5JQ0lBIE8gREFUQUxBWUVSDQogICAgICB3aW5kb3cuZGF0YUxheWVyID0gW107DQoNCiAgICAgIC8vREVGSU5FIENPTU8gU1VDRVNTTw0KICAgICAgdGhpcy5zdWNlc3NvID0gdHJ1ZTsNCiAgICB9DQoNCg0KICAgIC8vREVGSU5FIE8gREFUQUxBWUVSIEFQw5NTDQogICAgY29tdW5pY2FjYW8uJG9uKCd2YXJpYXZlaXNQdWJsaWNhc0NhcnJlZ2FkYXMnLCByZXNwb25zZSA9PiB7DQogICAgICB0aGlzLnNldFBhZ2luYShyZXNwb25zZSk7DQoNCiAgICAgIC8vSEFCSUxJVEEgTyBHVE0NCiAgICAgIGlmKCF0aGlzLiRndG0uZW5hYmxlZCgpKXsNCiAgICAgICAgdGhpcy4kZ3RtLmVuYWJsZSh0cnVlKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQoNCiAgICAgIC8vRU5WSUEgTyBWSVJUVUFMIFBBR0UgVklFVyBQT0lTIEEgVFJPQ0EgT0NPUlJFVSBFTSBURU1QTyBERSBFWEVDVcOHw4NPDQogICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goew0KICAgICAgICAgICdldmVudCc6ICdXYXBzdG9yZVZpcnR1YWxQYWdlVmlldycsDQogICAgICAgICAgJ3RpdGxlJzogcmVzcG9uc2UuZXN0cnV0dXJhLnNlby50aXRsZSwNCiAgICAgICAgICAncGFnZSc6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZQ0KICAgICAgfSk7DQogICAgfSk7DQoNCiAgfQ0KfQ0K"},{"version":3,"sources":["datalayers_bkp.vue"],"names":[],"mappings":";;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"datalayers_bkp.vue","sourceRoot":"src/components/gerais/head","sourcesContent":["<template lang=\"html\">\r\n  <div class=\"row\" style=\"none\"></div>\r\n</template>\r\n\r\n<script>\r\nimport comunicacao from '@/comunicacao.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      sucesso: false,\r\n      datalayer:{}\r\n    }\r\n  },\r\n  methods: {\r\n    setPagina(responsePagina){\r\n      //NÃO PERMITE CONTINUAR\r\n      if(!this.sucesso) return false;\r\n\r\n      //CRIA OS DATALAYERS DAS PÁGINAS\r\n      switch (responsePagina.estrutura.nivel) {\r\n        case 'home':\r\n          return this.setPaginaHome();\r\n\r\n        case 'product/listing/category':\r\n        case 'product/listing/brand':\r\n        case 'product/listing/landing-page':\r\n          return this.setPaginaListagem(responsePagina);\r\n\r\n        case 'product/listing/search':\r\n          return this.setPaginaBusca(responsePagina);\r\n\r\n        // case 'product/detail':\r\n        //   return this.setPaginaDetalheProduto(responsePagina);\r\n\r\n        default:\r\n          return this.setPaginaDefault();\r\n      }\r\n    },\r\n    setPaginaHome(){\r\n      window.dataLayer.push({\r\n        google_tag_params: {\r\n            ecomm_pagetype: 'home'\r\n        }\r\n      });\r\n    },\r\n    setPaginaDefault(){\r\n      window.dataLayer.push({\r\n        google_tag_params: {\r\n            ecomm_pagetype: 'other'\r\n        }\r\n      });\r\n    },\r\n    setPaginaListagem(responseListagem){\r\n\r\n      //AUXILIARES\r\n      var impressions = [];\r\n      var idsListados = [];\r\n      var valorTotal  = 0;\r\n      var disponivel  = 'indisponivel';\r\n      var nomePagina  = 'Listagem';\r\n\r\n      //NOME DA PÁGINA\r\n      switch (responseListagem.estrutura.nivel) {\r\n        case 'product/listing/category':\r\n          nomePagina = responseListagem.conteudo.categoria.nome;\r\n          break;\r\n        case 'product/listing/brand':\r\n          nomePagina = responseListagem.conteudo.marca.nome;\r\n          break;\r\n        case 'product/listing/landing-page':\r\n          nomePagina = responseListagem.conteudo.landingPage.nome;\r\n          break;\r\n      }\r\n\r\n      //PRODUTOS DA LISTAGEM\r\n      responseListagem.conteudo.produtos.map(function(value) {\r\n          //TODO ADICIONAR NOME DA MARCA\r\n          impressions.push({\r\n                           id: value.id,\r\n                           name: value.nome,\r\n                           price: value.precos.por,\r\n                           brand: \"\",\r\n                           list: nomePagina,\r\n                           position: (impressions.length + 1)\r\n                         });\r\n\r\n         //STATUS DA LISTAGEM\r\n         disponivel = value.status == 'disponivel' ? 'disponivel' : disponivel;\r\n\r\n         //VALOR TOTAL DA LISTAGEM\r\n         valorTotal += value.precos.por;\r\n\r\n         //IDS LISTADOS\r\n         idsListados.push(value.id);\r\n      });\r\n\r\n      //DATALAYER DE BUSCA\r\n      window.dataLayer.push({\r\n        google_tag_params: {\r\n            ecomm_prodid: idsListados,\r\n            ecomm_pagetype: 'category',\r\n            ecomm_totalvalue: valorTotal\r\n        },\r\n        estoque: disponivel,\r\n        ecommerce:{\r\n          currencyCode: \"BRL\",\r\n          impressions: impressions\r\n        }\r\n      });\r\n    },\r\n    setPaginaBusca(responseListagem){\r\n      //PRODUTOS DA LISTAGEM\r\n      var impressions = [];\r\n      responseListagem.conteudo.produtos.map(function(value) {\r\n          //TODO ADICIONAR NOME DA MARCA\r\n          impressions.push({\r\n                           id: value.id,\r\n                           name: value.nome,\r\n                           price: value.precos.por,\r\n                           brand: \"\",\r\n                           list: 'Search Results',\r\n                           position: (impressions.length + 1)\r\n                         });\r\n      });\r\n\r\n      //DATALAYER DE BUSCA\r\n      window.dataLayer.push({\r\n        google_tag_params: {\r\n            ecomm_pagetype: 'searchresults'\r\n        },\r\n        ecommerce:{\r\n          currencyCode: \"BRL\",\r\n          impressions: impressions\r\n        }\r\n      });\r\n    },\r\n    setPaginaDetalheProduto(responseDetalhe){\r\n      //PRODUTOS VINCULADOS AO DETALHE\r\n      //TODO: ADICIONAR DEMAIS PRODUTOS VINCULADOS\r\n      var produtos = [\r\n        {\r\n          id: responseDetalhe.conteudo.id,\r\n          name: responseDetalhe.conteudo.nome,\r\n          price: responseDetalhe.conteudo.precos.por,\r\n          brand: responseDetalhe.conteudo.marca.nome,\r\n          category: responseDetalhe.conteudo.categoria.nome\r\n        }\r\n      ];\r\n\r\n      //DATALAYER DE DETALHE\r\n      window.dataLayer.push({\r\n                                google_tag_params: {\r\n                                  ecomm_prodid: responseDetalhe.conteudo.id,\r\n                                  ecomm_pagetype: 'product',\r\n                                  ecomm_totalvalue: responseDetalhe.conteudo.precos.por,\r\n                                  ecomm_category: responseDetalhe.conteudo.categoria.nome\r\n                                },\r\n                                estoque:responseDetalhe.conteudo.status == 'disponivel' ? 'disponivel' : 'indisponivel',\r\n                                marcas:responseDetalhe.conteudo.marca.nome,\r\n                                sku:responseDetalhe.conteudo.sku,\r\n                                ecommerce:{\r\n                                  actionField:{\r\n                                    list: \"Página de produto\"\r\n                                  },\r\n                                  detail:{\r\n                                    products: produtos\r\n                                  }\r\n                                }\r\n                              });\r\n    }\r\n  },\r\n  created(){\r\n    //IN BROWSER\r\n    if(typeof window !== 'undefined'){\r\n      //INICIA O DATALAYER\r\n      window.dataLayer = [];\r\n\r\n      //DEFINE COMO SUCESSO\r\n      this.sucesso = true;\r\n    }\r\n\r\n\r\n    //DEFINE O DATALAYER APÓS\r\n    comunicacao.$on('variaveisPublicasCarregadas', response => {\r\n      this.setPagina(response);\r\n\r\n      //HABILITA O GTM\r\n      if(!this.$gtm.enabled()){\r\n        this.$gtm.enable(true);\r\n        return true;\r\n      }\r\n\r\n      //ENVIA O VIRTUAL PAGE VIEW POIS A TROCA OCORREU EM TEMPO DE EXECUÇÃO\r\n      window.dataLayer.push({\r\n          'event': 'WapstoreVirtualPageView',\r\n          'title': response.estrutura.seo.title,\r\n          'page': window.location.pathname\r\n      });\r\n    });\r\n\r\n  }\r\n}\r\n</script>\r\n"]}]}